<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"> <f:view
	contentType="text/html" id="fview">

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Ingenia</title>
	<ui:debug />
	<f:metadata>
		<ui:insert name="metadata" />
	</f:metadata>

	<h:head>
	</h:head>

	<h:body>

		<h:form>
			<p:messages autoUpdate="true" id="msgs" showDetail="true"
				showSummary="false" />
 
			<p:dialog header="Autenticacion" widgetVar="dlg" resizable="false"
				visible="true" closable="false">
				<h:panelGrid columns="2" cellpadding="5">
					<h:outputLabel for="Usuario" value="Usuario:" />
					<p:inputText id="Usuario" value="#{usuarioMB.usuario}"
						required="true" label="Usuario" />

					<h:outputLabel for="Clave" value="Contrasena:" />
					<p:password id="Clave" value="#{usuarioMB.clave}"
						required="true" label="Clave" />

					<f:facet name="footer">
						<p:commandButton value="Ingresar" actionListener="#{usuarioMB.autenticar}"
							oncomplete="manejarLogin(xhr, status, args)" />
					</f:facet>

				</h:panelGrid>

				<br />
				<br />
				Si no se encuentra registrado ingrese <p:link outcome="irregistro"
					value="aqui">
					<f:param name="p" value="x" />
				</p:link>

			</p:dialog>
		</h:form>
 
	</h:body>
	<script type="text/javascript">
  //<![CDATA[
  function manejarLogin(xhr, status, args) {
    if (!args.validationFailed && args.estaLogeado) {
      setTimeout(function() {
        window.location = args.view;
      }, 0);
    }
  }
//]]>
</script>

</f:view> 



</html>
